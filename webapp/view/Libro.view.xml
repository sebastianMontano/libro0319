<mvc:View
    controllerName="libro0319.libro0319.controller.Libro"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:m="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns:rowmodes="sap.ui.table.rowmodes"
>
    <Page
        id="page2"
        title="{i18n>title}"
        showNavButton="true"
        navButtonPress=".onNavBack"
        enableScrolling="true"
    >
        <!-- Bloque superior: título + toolbars + filtros -->
        <VBox
            id="_IDGenVBox"
            class="sapUiSmallMargin"
        >
            <!-- Título -->
            <Text
                id="_IDGenText2"
                text="LIBRO DE INVENTARIOS Y BALANCES - ESTADO DE CAMBIOS EN EL PATRIMONIO NETO"
                class="sapUiTinyMarginBottom"
            />
            <!-- Toolbar de acciones -->
            <Toolbar
                id="_IDGenToolbar"
                class="sapUiTinyMarginBottom"
            >
                <Title
                    id="_IDGenTitle"
                    text="Acciones"
                />
                <ToolbarSpacer id="_IDGenToolbarSpacer1" />
                <Button
                    id="_IDGenButtonXLSX"
                    text="Exportar a Excel"
                    icon="sap-icon://excel-attachment"
                    press="onExportExcel"
                />
                <Button
                    id="_IDGenButtonTXT"
                    text="Generar TXT"
                    icon="sap-icon://download"
                    press="onGenerateTxt"
                />
                <Button
                    id="_IDGenButton1"
                    text="Generar PDF"
                    icon="sap-icon://pdf-attachment"
                    press="onGeneratePDF"
                    visible="false"
                />
            </Toolbar>
            <!-- Botón para mostrar/ocultar filtros -->
            <Toolbar
                id="_IDGenToolbar1"
                class="sapUiTinyMarginBottom"
            >
                <ToolbarSpacer id="_IDGenToolbarSpacer2" />
                <Button
                    id="btnToggleFilters"
                    icon="sap-icon://filter"
                    text="Mostrar Filtros"
                    press="onToggleFilters"
                />
            </Toolbar>
            <!-- Toolbar de filtros (inicialmente oculta) -->
            <Toolbar
                id="filterVBox"
                visible="false"
                class="sapUiTinyMarginBottom"
            >
                <Title
                    id="_IDGenTitle1"
                    text="Filtros"
                />
                <ToolbarSpacer id="_IDGenToolbarSpacer3" />
                <Label
                    id="_IDGenLabel"
                    text="CUO"
                    labelFor="filter_c01periodo"
                />
                <Input
                    id="filter_c01periodo"
                    width="150px"
                    liveChange="onColumnFilter"
                >
                    <customData>
                        <core:CustomData
                            key="field"
                            value="c02catalogo"
                        />
                    </customData>
                </Input>
                <Label
                    id="_IDGenLabel2"
                    text="Cod.AF/Sub.Num"
                    labelFor="filter_c05accinv"
                />
                <Input
                    id="filter_c05accinv"
                    width="150px"
                    liveChange="onColumnFilter"
                >
                    <customData>
                        <core:CustomData
                            key="field"
                            value="c05accinv"
                        />
                    </customData>
                </Input>
                <Label
                    id="_IDGenLabel7"
                    text="Estado del A.F"
                    labelFor="filter_c10resacu"
                />
                <Input
                    id="filter_c10resacu"
                    width="150px"
                    liveChange="onColumnFilter"
                >
                    <customData>
                        <core:CustomData
                            key="field"
                            value="c10resacu"
                        />
                    </customData>
                </Input>
                <Button
                    id="_IDGenButton2"
                    text="Filtrar"
                    press="onFilter"
                />
                <Button
                    id="_IDGenButton"
                    text="Limpiar"
                    press="onClearFilters"
                />
            </Toolbar>
        </VBox>
        <!-- Contenedor de contenido (columna) que ocupa todo el alto -->
        <m:FlexBox
            id="contentFlex"
            direction="Column"
            fitContainer="true"
            height="100%"
        >
            <!-- Hijo que crece: envuelve la tabla -->
            <m:VBox
                id="_IDGenVBox1"
                height="100%"
            >
                <m:layoutData>
                    <m:FlexItemData
                        id="_IDGenFlexItemData1"
                        growFactor="1"
                    />
                </m:layoutData>
                <table:Table
                    id="tblResultados"
                    rows="{resultsModel>/}"
                    selectionMode="None"
                    enableColumnReordering="true"
                    width="100%"
                >
                    <!-- Hace que la tabla crezca dentro del Flex -->
                    <table:layoutData>
                        <m:FlexItemData
                            id="_IDGenFlexItemData2"
                            growFactor="1"
                        />
                    </table:layoutData>
                    <!-- Row mode moderno -->
                    <table:rowMode>
                        <rowmodes:Auto
                            id="_IDGenAuto"
                            minRowCount="5"
                            maxRowCount="30"
                        />
                    </table:rowMode>
                    <table:columns>
                        <!-- 1 -->
                        <table:Column
                            id="_IDGenColumn"
                            width="200px"
                            sortProperty="c01periodo"
                        >
                            <HBox
                                id="_IDGenHBox"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText"
                                    text="Periodo"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText1"
                                    text="{resultsModel>c01periodo}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 2 -->
                        <table:Column
                            id="_IDGenColumn1"
                            width="200px"
                            sortProperty="c02catalogo"
                        >
                            <HBox
                                id="_IDGenHBox1"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText3"
                                    text="Cód.Catálogo"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText4"
                                    text="{resultsModel>c02catalogo}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 3 -->
                        <table:Column
                            id="_IDGenColumn2"
                            width="200px"
                            sortProperty="c03rubro"
                        >
                            <HBox
                                id="_IDGenHBox2"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText5"
                                    text="Cód.Rubro"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText6"
                                    text="{resultsModel>c03rubro}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 4 -->
                        <table:Column
                            id="_IDGenColumn3"
                            width="200px"
                            sortProperty="c04capital"
                        >
                            <HBox
                                id="_IDGenHBox3"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText7"
                                    text="Capital"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText8"
                                    text="{resultsModel>c04capital}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 5 -->
                        <table:Column
                            id="_IDGenColumn4"
                            width="200px"
                            sortProperty="c05accinv"
                        >
                            <HBox
                                id="_IDGenHBox4"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText9"
                                    text="Acciones.Inversión"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText10"
                                    text="{resultsModel>c05accinv}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 6 -->
                        <table:Column
                            id="_IDGenColumn5"
                            width="200px"
                            sortProperty="c06capadi"
                        >
                            <HBox
                                id="_IDGenHBox5"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText11"
                                    text="Capital Adicional"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText12"
                                    text="{resultsModel>c06capadi}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 7 -->
                        <table:Column
                            id="_IDGenColumn6"
                            width="200px"
                            sortProperty="c07resnre"
                        >
                            <HBox
                                id="_IDGenHBox6"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText13"
                                    text="Resultados No.Realiz"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText14"
                                    text="{resultsModel>c07resnre}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 8 -->
                        <table:Column
                            id="_IDGenColumn7"
                            width="200px"
                            sortProperty="c08resleg"
                        >
                            <HBox
                                id="_IDGenHBox7"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText15"
                                    text="Reservas Legales"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText16"
                                    text="{path: 'resultsModel>c08resleg', formatter: '.formatDate'}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 9 -->
                        <table:Column
                            id="_IDGenColumn8"
                            width="200px"
                            sortProperty="c09otrres"
                        >
                            <HBox
                                id="_IDGenHBox8"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText17"
                                    text="Otras Reservas"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText18"
                                    text="{resultsModel>c09otrres}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 10 -->
                        <table:Column
                            id="_IDGenColumn9"
                            width="200px"
                            sortProperty="c10resacu"
                        >
                            <HBox
                                id="_IDGenHBox9"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText19"
                                    text="Resultados Acumulado"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText20"
                                    text="{resultsModel>c10resacu}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 11 -->
                        <table:Column
                            id="_IDGenColumn10"
                            width="200px"
                            sortProperty="c11difcnv"
                        >
                            <HBox
                                id="_IDGenHBox10"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText21"
                                    text="Dif.Conversión"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText22"
                                    text="{resultsModel>c11difcnv}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 12 -->
                        <table:Column
                            id="_IDGenColumn11"
                            width="200px"
                            sortProperty="c12ajuptr"
                        >
                            <HBox
                                id="_IDGenHBox39"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText76"
                                    text="Ajustes.Patrimonio"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText77"
                                    text="{resultsModel>c12ajuptr}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 13 -->
                        <table:Column
                            id="_IDGenColumn12"
                            width="200px"
                            sortProperty="c13resnej"
                        >
                            <HBox
                                id="_IDGenHBox40"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText78"
                                    text="Res.Neto.Ejercicio"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText26"
                                    text="{resultsModel>c13resnej}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 14 -->
                        <table:Column
                            id="_IDGenColumn13"
                            width="200px"
                            sortProperty="c14excrev"
                        >
                            <HBox
                                id="_IDGenHBox41"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText27"
                                    text="Excedente.Reval."
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText28"
                                    text="{resultsModel>c14excrev}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 15 -->
                        <table:Column
                            id="_IDGenColumn14"
                            width="200px"
                            sortProperty="c15reseje"
                        >
                            <HBox
                                id="_IDGenHBox14"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText29"
                                    text="Res.Ejercicio"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText30"
                                    text="{resultsModel>c15reseje}"
                                />
                            </table:template>
                        </table:Column>
                        <!-- 16 -->
                        <table:Column
                            id="_IDGenColumn15"
                            width="200px"
                            sortProperty="c16estadooperacion"
                        >
                            <HBox
                                id="_IDGenHBox15"
                                justifyContent="Center"
                                alignItems="Center"
                            >
                                <Text
                                    id="_IDGenText31"
                                    text="Estado.Operación"
                                />
                            </HBox>
                            <table:template>
                                <Text
                                    id="_IDGenText32"
                                    text="{resultsModel>c16estadooperacion}"
                                />
                            </table:template>
                        </table:Column>
                    </table:columns>
                </table:Table>
            </m:VBox>
        </m:FlexBox>
    </Page>
</mvc:View>
